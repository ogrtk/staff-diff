# プロジェクト概要

このプロジェクトは、PowerShellスクリプトとSQLiteを使用して、2つのCSVファイル（提供データと現在データ）を比較し、データを同期するシステムです。

## 主な特徴

### 1. 設定駆動型のアーキテクチャ
- `config/data-sync-config.json` という単一の設定ファイルで、データスキーマ、ファイルパス、同期ルール、フィルタリング条件、エラーハンドリング、ロギングなど、システムのほぼ全ての動作を定義します。
- これにより、PowerShellのコードを直接修正することなく、データ項目の追加や同期ロジックの変更が柔軟に行えます。

### 2. 高度なデータ同期機能
- 提供データと現在データを比較し、`ADD`（追加）、`UPDATE`（更新）、`DELETE`（削除）、`KEEP`（変更なし）の4つの状態を判定して同期します。
- 同期のキーとなる列や、テーブル間の項目マッピングも設定ファイルで細かく指定可能です。

### 3. 堅牢なデータ処理パイプライン
- **CSV処理**: 設定に基づき、異なる形式のCSVファイル（ヘッダーの有無、区切り文字など）を読み書きします。
- **データフィルタリング**: 正規表現や特定の値に基づき、処理対象から不要なデータを除外できます。
- **履歴管理**: 処理に使用した入力ファイルと、生成された出力ファイルは、実行日時のタイムスタンプ付きで`data`ディレクトリに自動的にバックアップされます。
- **レポートとログ**: 同期結果の統計（追加・更新・削除件数など）や、データベースのテーブル情報をコンソールに表示します。また、処理の過程は詳細なログファイルに出力されます。

## 実行方法

- `scripts/main.ps1` がメインの実行スクリプトです。
- 処理対象のファイルパスは、スクリプト実行時の引数として渡すか、事前に `config/data-sync-config.json` に記述しておくことで指定できます。

## 技術スタック

- **メイン言語**: PowerShell
- **データベース**: SQLite
- **設定**: JSON