{
  "description": "テスト用設定ファイル",
  "error_handling": {
    "continue_on_error": {
      "System": false,
      "External": false,
      "Data": true
    },
    "retry_settings": {
      "max_attempts": 1,
      "enabled": false,
      "delay_seconds": [
        1
      ],
      "retryable_categories": []
    },
    "enabled": true,
    "error_levels": {
      "System": "Error",
      "description": "エラーカテゴリ別のログレベル設定",
      "External": "Error",
      "Data": "Warning"
    },
    "cleanup_on_error": true,
    "log_stack_trace": true
  },
  "csv_format": {
    "provided_data": {
      "encoding": "UTF-8",
      "newline": "LF",
      "has_header": false,
      "allow_empty_file": true,
      "null_values": [
        "",
        "NULL",
        "null"
      ],
      "delimiter": ","
    },
    "current_data": {
      "encoding": "UTF-8",
      "newline": "LF",
      "has_header": true,
      "allow_empty_file": true,
      "null_values": [
        "",
        "NULL",
        "null"
      ],
      "delimiter": ","
    },
    "output": {
      "include_header": true,
      "newline": "CRLF",
      "delimiter": ",",
      "encoding": "UTF-8"
    }
  },
  "version": "1.0.0",
  "performance_settings": {
    "auto_optimization": true,
    "description": "性能最適化設定",
    "index_threshold": 100000,
    "batch_size": 1000,
    "sqlite_pragmas": {
      "temp_store": "MEMORY",
      "journal_mode": "WAL",
      "synchronous": "NORMAL",
      "cache_size": 10000
    }
  },
  "file_paths": {
    "output_history_directory": "/workspaces/ps-sqlite/test-data/integration/history/output",
    "timezone": "Asia/Tokyo",
    "provided_data_history_directory": "/workspaces/ps-sqlite/test-data/integration/history/provided-data",
    "current_data_file_path": "/workspaces/ps-sqlite/test-data/integration/current.csv",
    "output_file_path": "/workspaces/ps-sqlite/test-data/integration/output.csv",
    "current_data_history_directory": "/workspaces/ps-sqlite/test-data/integration/history/current-data",
    "provided_data_file_path": "/workspaces/ps-sqlite/test-data/integration/provided.csv"
  },
  "sync_rules": {
    "key_columns": {
      "provided_data": [
        "employee_id"
      ],
      "current_data": [
        "user_id"
      ],
      "sync_result": [
        "syokuin_no"
      ]
    },
    "sync_action_labels": {
      "mappings": {
        "ADD": {
          "description": "新規追加",
          "value": "1"
        },
        "UPDATE": {
          "description": "更新",
          "value": "2"
        },
        "KEEP": {
          "description": "変更なし",
          "value": "9"
        },
        "DELETE": {
          "description": "削除",
          "value": "3"
        }
      }
    },
    "sync_result_mapping": {
      "description": "sync_resultテーブルへの格納項目対応付け（テスト用完全版）",
      "mappings": {
        "syokuin_no": {
          "description": "職員番号",
          "sources": [
            {
              "description": "提供データの職員ID（最優先）",
              "type": "provided_data",
              "field": "employee_id",
              "priority": 1
            },
            {
              "description": "現在データの利用者ID（フォールバック）",
              "type": "current_data",
              "field": "user_id",
              "priority": 2
            }
          ]
        },
        "card_number": {
          "description": "カード番号",
          "sources": [
            {
              "description": "提供データのカード番号（最優先）",
              "type": "provided_data",
              "field": "card_number",
              "priority": 1
            },
            {
              "description": "現在データのカード番号（フォールバック）",
              "type": "current_data",
              "field": "card_number",
              "priority": 2
            }
          ]
        },
        "email": {
          "description": "メールアドレス",
          "sources": [
            {
              "description": "提供データのメールアドレス（最優先）",
              "type": "provided_data",
              "field": "email",
              "priority": 1
            },
            {
              "description": "現在データのメールアドレス（フォールバック）",
              "type": "current_data",
              "field": "email",
              "priority": 2
            }
          ]
        },
        "position": {
          "description": "役職",
          "sources": [
            {
              "description": "提供データの役職（最優先）",
              "type": "provided_data",
              "field": "position",
              "priority": 1
            },
            {
              "description": "現在データの役職（フォールバック）",
              "type": "current_data",
              "field": "position",
              "priority": 2
            }
          ]
        },
        "department": {
          "description": "部署",
          "sources": [
            {
              "description": "提供データの部署（最優先）",
              "type": "provided_data",
              "field": "department",
              "priority": 1
            },
            {
              "description": "現在データの部署（フォールバック）",
              "type": "current_data",
              "field": "department",
              "priority": 2
            },
            {
              "priority": 3,
              "description": "デフォルト部署名（最終フォールバック）",
              "type": "fixed_value",
              "value": "未設定"
            }
          ]
        },
        "hire_date": {
          "description": "入社日",
          "sources": [
            {
              "description": "提供データの入社日（最優先）",
              "type": "provided_data",
              "field": "hire_date",
              "priority": 1
            },
            {
              "description": "現在データの入社日（フォールバック）",
              "type": "current_data",
              "field": "hire_date",
              "priority": 2
            }
          ]
        },
        "name": {
          "description": "氏名",
          "sources": [
            {
              "description": "提供データの氏名（最優先）",
              "type": "provided_data",
              "field": "name",
              "priority": 1
            },
            {
              "description": "現在データの氏名（フォールバック）",
              "type": "current_data",
              "field": "name",
              "priority": 2
            }
          ]
        },
        "phone": {
          "description": "電話番号",
          "sources": [
            {
              "priority": 1,
              "description": "固定値",
              "type": "fixed_value",
              "value": "999-9999-9999"
            }
          ]
        }
      }
    },
    "column_mappings": {
      "description": "テーブル間の比較項目対応付け（provided_dataの項目:current_dataの項目）",
      "mappings": {
        "card_number": "card_number",
        "employee_id": "user_id",
        "email": "email",
        "position": "position",
        "department": "department",
        "hire_date": "hire_date",
        "name": "name",
        "phone": "phone"
      }
    }
  },
  "tables": {
    "provided_data": {
      "indexes": [
        {
          "description": "職員ID検索用インデックス（大量データ時の比較処理高速化）",
          "name": "idx_provided_employee_id",
          "columns": [
            "employee_id"
          ]
        }
      ],
      "description": "提供データテーブル",
      "table_constraints": [
        {
          "description": "職員IDの一意制約（明示的定義）",
          "name": "uk_provided_employee_id",
          "type": "UNIQUE",
          "columns": [
            "employee_id"
          ]
        }
      ],
      "columns": [
        {
          "csv_include": false,
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "name": "id",
          "type": "INTEGER",
          "description": "内部ID"
        },
        {
          "name": "employee_id",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "職員ID",
          "constraints": "NOT NULL"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "カード番号",
          "constraints": ""
        },
        {
          "name": "name",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "氏名",
          "constraints": "NOT NULL"
        },
        {
          "name": "department",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "部署",
          "constraints": ""
        },
        {
          "name": "position",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "役職",
          "constraints": ""
        },
        {
          "name": "email",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "メールアドレス",
          "constraints": ""
        },
        {
          "name": "phone",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "電話番号",
          "constraints": ""
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "required": false,
          "csv_include": true,
          "description": "入社日",
          "constraints": ""
        }
      ]
    },
    "current_data": {
      "indexes": [
        {
          "description": "利用者ID検索用インデックス（大量データ時の比較処理高速化）",
          "name": "idx_current_user_id",
          "columns": [
            "user_id"
          ]
        }
      ],
      "description": "現在データテーブル",
      "table_constraints": [
        {
          "description": "利用者IDの一意制約（明示的定義）",
          "name": "uk_current_user_id",
          "type": "UNIQUE",
          "columns": [
            "user_id"
          ]
        }
      ],
      "columns": [
        {
          "csv_include": false,
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "name": "id",
          "type": "INTEGER",
          "description": "内部ID"
        },
        {
          "name": "user_id",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "利用者ID",
          "constraints": "NOT NULL"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "カード番号",
          "constraints": ""
        },
        {
          "name": "name",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "氏名",
          "constraints": "NOT NULL"
        },
        {
          "name": "department",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "部署",
          "constraints": ""
        },
        {
          "name": "position",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "役職",
          "constraints": ""
        },
        {
          "name": "email",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "メールアドレス",
          "constraints": ""
        },
        {
          "name": "phone",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "電話番号",
          "constraints": ""
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "required": false,
          "csv_include": true,
          "description": "入社日",
          "constraints": ""
        }
      ]
    },
    "sync_result": {
      "indexes": [],
      "description": "同期結果テーブル",
      "table_constraints": [
        {
          "description": "職員番号の一意制約（重複レコード防止）",
          "name": "uk_sync_result_syokuin_no",
          "type": "UNIQUE",
          "columns": [
            "syokuin_no"
          ]
        }
      ],
      "columns": [
        {
          "csv_include": false,
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "name": "id",
          "type": "INTEGER",
          "description": "内部ID"
        },
        {
          "name": "syokuin_no",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "職員ID",
          "constraints": "NOT NULL"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "カード番号",
          "constraints": ""
        },
        {
          "name": "name",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "氏名",
          "constraints": "NOT NULL"
        },
        {
          "name": "department",
          "type": "TEXT",
          "required": false,
          "csv_include": false,
          "description": "部署",
          "constraints": ""
        },
        {
          "name": "position",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "役職",
          "constraints": ""
        },
        {
          "name": "email",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "メールアドレス",
          "constraints": ""
        },
        {
          "name": "phone",
          "type": "TEXT",
          "required": false,
          "csv_include": true,
          "description": "電話番号",
          "constraints": ""
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "required": false,
          "csv_include": true,
          "description": "入社日",
          "constraints": ""
        },
        {
          "name": "sync_action",
          "type": "TEXT",
          "required": true,
          "csv_include": true,
          "description": "同期アクション (ADD, UPDATE, DELETE, KEEP)",
          "constraints": "NOT NULL"
        }
      ]
    }
  },
  "logging": {
    "levels": [
      "Info",
      "Warning",
      "Error",
      "Success"
    ],
    "max_files": 3,
    "log_file_name": "test-system.log",
    "enabled": true,
    "log_directory": "./test-data/temp/logs/",
    "max_file_size_mb": 5
  },
  "data_filters": {
    "current_data": {
      "output_excluded_as_keep": {
        "enabled": true
      },
      "rules": [
        {
          "type": "exclude",
          "description": "Z始まりのユーザーIDを除外",
          "field": "user_id",
          "glob": "Z*"
        }
      ],
      "enabled": false
    },
    "provided_data": {
      "enabled": false,
      "rules": [
        {
          "type": "exclude",
          "description": "Z始まりの職員IDを除外",
          "field": "employee_id",
          "glob": "Z*"
        }
      ]
    }
  }
}
