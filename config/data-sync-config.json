{
  "version": "1.0.0",
  "description": "PowerShell & SQLite 職員データ管理システム スキーマ設定",
  "file_paths": {
    "description": "ファイルパス設定",
    "provided_data_file_path": "./test-data/provided.csv",
    "current_data_file_path": "./test-data/current.csv",
    "output_file_path": "./test-data/sync-result.csv",
    "provided_data_history_directory": "./data/provided-data/",
    "current_data_history_directory": "./data/current-data/",
    "output_history_directory": "./data/output/",
    "timezone": "Asia/Tokyo"
  },
  "tables": {
    "provided_data": {
      "description": "提供データテーブル",
      "columns": [
        {
          "name": "id",
          "type": "INTEGER",
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "csv_include": false,
          "description": "内部ID"
        },
        {
          "name": "employee_id",
          "type": "TEXT",
          "constraints": "NOT NULL UNIQUE",
          "csv_include": true,
          "required": true,
          "description": "職員ID"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "カード番号"
        },
        {
          "name": "name",
          "type": "TEXT",
          "constraints": "NOT NULL",
          "csv_include": true,
          "required": true,
          "description": "氏名"
        },
        {
          "name": "department",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "部署"
        },
        {
          "name": "position",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "役職"
        },
        {
          "name": "email",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "メールアドレス"
        },
        {
          "name": "phone",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "電話番号"
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "入社日"
        }
      ],
      "indexes": []
    },
    "current_data": {
      "description": "現在データテーブル",
      "columns": [
        {
          "name": "id",
          "type": "INTEGER",
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "csv_include": false,
          "description": "内部ID"
        },
        {
          "name": "user_id",
          "type": "TEXT",
          "constraints": "NOT NULL UNIQUE",
          "csv_include": true,
          "required": true,
          "description": "利用者ID"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "カード番号"
        },
        {
          "name": "name",
          "type": "TEXT",
          "constraints": "NOT NULL",
          "csv_include": true,
          "required": true,
          "description": "氏名"
        },
        {
          "name": "department",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "部署"
        },
        {
          "name": "position",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "役職"
        },
        {
          "name": "email",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "メールアドレス"
        },
        {
          "name": "phone",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "電話番号"
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "入社日"
        }
      ],
      "indexes": []
    },
    "sync_result": {
      "description": "同期結果テーブル",
      "columns": [
        {
          "name": "id",
          "type": "INTEGER",
          "constraints": "PRIMARY KEY AUTOINCREMENT",
          "csv_include": false,
          "description": "内部ID"
        },
        {
          "name": "syokuin_no",
          "type": "TEXT",
          "constraints": "NOT NULL",
          "csv_include": true,
          "required": true,
          "description": "職員ID"
        },
        {
          "name": "card_number",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "カード番号"
        },
        {
          "name": "name",
          "type": "TEXT",
          "constraints": "NOT NULL",
          "csv_include": true,
          "required": true,
          "description": "氏名"
        },
        {
          "name": "department",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "部署"
        },
        {
          "name": "position",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "役職"
        },
        {
          "name": "email",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "メールアドレス"
        },
        {
          "name": "phone",
          "type": "TEXT",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "電話番号"
        },
        {
          "name": "hire_date",
          "type": "DATE",
          "constraints": "",
          "csv_include": true,
          "required": false,
          "description": "入社日"
        },
        {
          "name": "sync_action",
          "type": "TEXT",
          "constraints": "NOT NULL",
          "csv_include": true,
          "required": true,
          "description": "同期アクション (ADD, UPDATE, DELETE, KEEP)"
        }
      ],
      "indexes": []
    }
  },
  "sync_rules": {
    "comparison_columns": {
      "description": "テーブル別比較カラム設定",
      "provided_data": [
        "card_number",
        "name",
        "department",
        "position",
        "email",
        "phone",
        "hire_date"
      ],
      "current_data": [
        "card_number",
        "name",
        "department",
        "position",
        "email",
        "phone",
        "hire_date"
      ]
    },
    "key_columns": {
      "provided_data": [
        "employee_id"
      ],
      "current_data": [
        "user_id"
      ],
      "sync_result": [
        "syokuin_no"
      ]
    },
    "column_mappings": {
      "description": "テーブル間のカラムマッピング設定（単方向定義、逆方向は自動生成）",
      "provided_data_to_current_data": {
        "employee_id": "user_id",
        "card_number": "card_number",
        "name": "name",
        "department": "department",
        "position": "position",
        "email": "email",
        "phone": "phone",
        "hire_date": "hire_date"
      }
    },
    "sync_result_mapping": {
      "description": "sync_resultテーブルへのフィールドマッピング（provided_data優先）",
      "field_mappings": {
        "syokuin_no": {
          "provided_data_field": "employee_id",
          "current_data_field": "user_id"
        },
        "card_number": {
          "provided_data_field": "card_number",
          "current_data_field": "card_number"
        },
        "name": {
          "provided_data_field": "name",
          "current_data_field": "name"
        },
        "department": {
          "provided_data_field": "department",
          "current_data_field": "department"
        },
        "position": {
          "provided_data_field": "position",
          "current_data_field": "position"
        },
        "email": {
          "provided_data_field": "email",
          "current_data_field": "email"
        },
        "phone": {
          "provided_data_field": "phone",
          "current_data_field": "phone"
        },
        "hire_date": {
          "provided_data_field": "hire_date",
          "current_data_field": "hire_date"
        }
      }
    },
    "key_column": "syokuin_no"
  },
  "data_filters": {
    "provided_data": {
      "enabled": true,
      "description": "提供データのフィルタリング設定",
      "rules": [
        {
          "field": "employee_id",
          "type": "exclude_pattern",
          "pattern": "^Z.*",
          "description": "Z始まりの職員番号を除外"
        },
        {
          "field": "employee_id",
          "type": "exclude_pattern",
          "pattern": "^Y.*",
          "description": "Y始まりの職員番号を除外"
        }
      ]
    },
    "current_data": {
      "enabled": true,
      "description": "現在データのフィルタリング設定",
      "rules": [
        {
          "field": "user_id",
          "type": "exclude_pattern",
          "pattern": "^Z.*",
          "description": "Z始まりの職員番号を除外"
        },
        {
          "field": "user_id",
          "type": "exclude_pattern",
          "pattern": "^Y.*",
          "description": "Y始まりの職員番号を除外"
        }
      ]
    }
  },
  "logging": {
    "description": "ログ設定",
    "enabled": true,
    "log_directory": "./logs/",
    "log_file_name": "staff-management.log",
    "max_file_size_mb": 10,
    "max_files": 5,
    "levels": [
      "Info",
      "Warning",
      "Error",
      "Success"
    ]
  }
}